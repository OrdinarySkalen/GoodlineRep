#####Гаврилов Артем

Т.к. реализация большинства требований размазана по всему алгоритму, соотношение требование - реализующий пункт было большей частью вынесено в конец документа.

Декомпозиция требований/Составление плана работы:
Ver 1.1
1)	Создать консольное приложение
2)	Определить перечисление Const, содержащее элементы: READ, WRITE, EXECUTE; (enum Const { READ, WRITE, EXECUTE }) (требование 5)
3)	Создать класс Resourse с атрибутами name и списком ролей roles<Const>; (требование 4)
4)	Создать класс User с атрибутами  ID_user ,login, pass_hash, salt и списком доступных ему ресурсов availRes<Resourse>. (требование 2)
5)	Определить в классе User метод TryGetAccess(Resourse, Role), определяющий доступен ли ресурс пользователю.
6)	Определить метод GetHash(login, pass, User.ID_user), осуществляющий хеширование введенного пароля и возвращающих полученный хеш. (требование 2)
7)	Определить метод FindUser(login), осуществляющий поиск пользователя по введенному логину, возвращающий ID_user объекта класса User. (требование 1)
8)	Определить в классе Resourse метод AskChildRes(Resourse, role), определяющий является ли переданный в качестве параметра ресурс дочерним;(требование 6)
9)	Определить метод GetChildRes(Resourse ,role), возвращающий все родительские? ресурсы ресурса Resourse с некоторой ролью role. (требование 6)
10)	Аутентификация 
a)	При отсутствии параметров login и pass вернуть справку, иначе переход к пункту b; (требование 8)
b)	Вызвать метод FindUser(X), где Х - значение параметра login;
c)	Если соответствие найдено переход к пункту d, иначе вернуть exit-код 1;;
d)	Посчитать хеш введенного пароля (параметр pass), вызвав метод GetHash(login, pass, User.ID_user);(требование 2)
e)	Сравнить полученное в пункте d значение с хранимым значением хеша пароля, если проверка пройдена, переход к пункту g, иначе вернуть exit-код 2;(требование 2)
f)	 Если в наличии только параметры login и pass, вернуть exit-код 0, иначе переход к пункту 4;(требование 1)
(Реализованы требования: R1.1 - пользователь имеет возможность просто пройти аутентификацию; R1.3 - переход к авторизации возможен только при успешном прохождении аутентификации; R1.2)
11)	Авторизация 
a)	Если содержимое параметра role не совпадает ни с одним из элементов перечисления Const - вернуть exit-код 3, иначе переход к пункту d; (требование 5)
b)	Вызвать метод TryGetAccess(res, role), для аутентифицированного пользователя; Если аутентифицированный пользователь не имеет права пользоваться запрошенным ресурсом, вернуть exit-код 4, иначе переход к пункту g; (требование 9, позволяет вернуть exit-код 4)
//Как работает метод TryGetAccess: осуществляется выборка ресурсов из availRes с переданной ролью, для каждого из элементов выборки вызывается метод AskChildRes(переданный ресурс), если переданный ресурс найден среди дочерних ресурсов к нему открывается доступ.
c)	Произвести выборку ресурсов, являющихся дочерними по отношению к указанному в параметре res с помощью метода GetChildRes; (требование 6)
d)	Открыть доступ к найденным методом ресурсам. (требование 6)
e)	Если параметры ds, dr и vol отсутствуют, вернуть exit-код 0, иначе переход к пункту 5;
12)	Аккаунтинг 
a)	Создать класс Record с атрибутами User, Resourses<Resorse>, DateS, DateE, Volume. (требование 7)
b)	Создать список Journal<Record>, содержащий записи о использовании ресурсов. (требование 7)
c)	Создать экземпляр класса Record передав в качестве параметров авторизированного пользователя, список ресурсов к которым предоставлен доступ, значение параметра ds, значение параметра de, значение параметра vol. Если введенную даты имеют неверный формат , вернуть exit-код 5, иначе переход к пункту d;  (требование 7)
d)	Добавить созданный экземпляр в список Journal.  Вернуть exit-код 0;
(Реализовано требование R1.11 - Приложение сначала пытается аутентифицировать (результат 0, 1, 2), потом авторизовать (результат 0, 3, 4) и аккаунтить (результаты 0, 5))

13)	Создание bat-файла: (реализует требование R1.12)

login user1 - вывести справку
login pass - вывести справку
login usser1(этот пользователь не существует) pass 123461 - вернется exit-код 1;
login user1 pass 15646132(неверный пароль) - вернется exit-код 2;
login user1 pass 123461 - вернется exit-код 0;
login user1 pass 123461 res A.B - вернется exit-код 0;
login user1 pass 123461 res A.B role REED -  вернется exit-код 3;
login user1 pass 123461 res A.C(недоступный пользователю ресурс) role REED -  вернется exit-код 4;
login user1 pass 123461 res A.B role WRITE (данный ресурс с этой ролью не доступен пользователю) -  вернется exit-код 4;
login user1 pass 123461 res A.B role READ -  вернется exit-код 0;
login user1 pass 123461 res A.B role READ ds 2017-12-01 -  вернется exit-код 0 //вы писали что если какого-то параметра не хватает, то работаем с минимально достаточным;
login user1 pass 123461 res A.B role READ ds 2017-12-01 de 20017-12-01 vol 100   -  вернется exit-код 5;
login user1 pass 123461 res A.B role READ ds 2017-12-01 de 2017-12-01 vol -100(отрицательный объем)   -  вернется exit-код 5;
login user1 pass 123461 res A.B role READ ds 2017-12-01 de 2017-12-01 vol 100 - вернется exit-код 0



